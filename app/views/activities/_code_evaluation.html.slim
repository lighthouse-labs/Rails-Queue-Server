- content_for :end_of_body
  == javascript_include_tag('https://cdnjs.cloudflare.com/ajax/libs/mocha/2.3.4/mocha.js')
  == javascript_include_tag('https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js')

  javascript: 
    (function(win) {
      var ncon = win.console;

      var con = win.console = {
        backlog: []
      };

      ['log'].forEach( function(k) {
        con[k] = (function(fn) {
          return function() {
            // ncon.log(arguments[0]);
            var data = arguments[0];
            if (data instanceof Array) {
              data = data.slice(0);
            } else if (typeof(data) == 'object') {
              data = jQuery.extend({}, data);
            }
            con.backlog.push([new Date(), fn, data]);
            ncon[fn].apply(ncon, arguments);
          };
        })(k);
        con['clear'] = (function(fn) {
          return function() {
              con.backlog = []
              ncon['clear'].apply(ncon, arguments);
          };
        })('clear');
      });
    })(window);

- show_results = !@last_submission || (@last_submission && !@last_submission.finalized?)

- if show_results
  div id="results"
    #linter.hidden
      h3 Lint Results
      ul

    #test_holder.hidden
      h3 Test Results
      #mocha
  

h3 
  | Your Code 
  = "(Completed)" if @last_submission.try(:finalized)

code#code_content.hidden = @last_submission ? @last_submission.code_evaluation_results["code"] : activity.activity_test.try(:initial_code)
#prep_test_editor.editor data-finalized="#{@last_submission.try(:finalized)}"
= hidden_field_tag :test_content, activity.activity_test.try(:test)

- if show_results
  button.run-test.btn.btn-success.btn-block data-url=activity_activity_submission_path(@activity) Evaluate 

